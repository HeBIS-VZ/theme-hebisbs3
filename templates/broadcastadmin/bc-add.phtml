<?php
$activeLang = $this->layout()->userLang;
$this->headTitle('VuFind Administration - ' . $this->translate('Broadcasts - Add'));
$this->headScript()
    ->appendFile($this->basePath() . '/themes/hebisbs3/js/admin.js')
    ->appendFile($this->basePath() . '/themes/hebisbs3/js/datepicker/bootstrap-datepicker.js')
    ->appendFile($this->basePath() . '/themes/hebisbs3/js/datepicker/locales/bootstrap-datepicker.de.min.js')
    ->appendFile($this->basePath() . '/themes/hebisbs3/js/bootstrap-checkbox/js/bootstrap-checkbox.min.js');

$datePickerScript = '$(document).ready(function(){$("#datepicker").datepicker({format: "dd.mm.yyyy", language: "de"});});';
$this->headScript()->appendScript($datePickerScript, $type = 'text/javascript');

?>
<div class="row">

    <div class="<?= $this->layoutClass('mainbody') ?>">


        <!-- Language Tabs -->

        <ul class="nav nav-tabs">
            <? foreach ($this->langs as $code => $language) : ?>
                <li class="bc-form">
                    <a data-toggle="tab"
                       lang="<?= $code ?>"
                       href="#admin-<?= $code ?>-form"
                       id="admin-lang-tab-<?= $code ?>"><?= $this->transEsc($language) ?></a>
                </li>
            <? endforeach; ?>
        </ul>

        <!-- Tab Contents -->
        <form id="new-bc" method="post">
            <div class="tab-content">

                <? foreach ($this->langs as $code => $language) : ?>

                    <div lang="<?= $code ?>" class="tab-pane fade" id="admin-<?= $code ?>-form">

                        <div class="alert alert-warning bc-alert">&nbsp;</div>

                        <div class="form-group">
                            <input type="hidden" class="form-control" name="bc-lang[]" value="<?= $code ?>">
                        </div>

                        <div class="form-group">
                            <div class="input-group">
                                <input type="text" class="form-control bc-message input-md" name="bc-message[]"
                                       placeholder="<?= $this->translate('Broadcast Message') ?>"
                                       autocomplete="off" id="bc-message-<?= $code ?>">
                                <div class="input-group-btn bc-types" data-toggle="buttons">
                                    <label class="btn btn-success">
                                        <input class="form-control" type="radio" name="bc-type" value="success"
                                               autocomplete="off">&nbsp;
                                    </label>
                                    <label class="btn btn-info">
                                        <input class="form-control" type="radio" name="bc-type" value="info"
                                               autocomplete="off">&nbsp;
                                    </label>
                                    <label class="btn btn-warning active">
                                        <input class="form-control" type="radio" name="bc-type" value="warning"
                                               autocomplete="off" checked>&nbsp;
                                    </label>
                                    <label class="btn btn-danger">
                                        <input class="form-control" type="radio" name="bc-type" value="danger"
                                               autocomplete="off">&nbsp;
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                <? endforeach; ?>
            </div>

            <div class="form-group" style="width: 40%">
                <div class="input-group date">
                    <span class="input-group-addon hds-icon-calendar-empty">&nbsp;<?= $this->transEsc('Expires on') ?></span>
                    <input type="text" class="form-control" autocomplete="off" name="bc-expireDate" id="datepicker">
                </div>
            </div>

            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon hds-icon-eye-off">&nbsp;<?= $this->transEsc('Show now') ?></span>
                    <input id="bc-show-checkbox" type="checkbox" checked data-cls="btn-default" data-off-cls="null"
                           name="bc-show" data-on-cls="null" data-on-active-cls="null" data-off-active-cls="null">
                    <script>
                        $('#bc-show-checkbox').checkboxpicker({
                            html: true,
                            offLabel: '<?= $this->translate('no'); ?>',
                            onLabel: '<?= $this->translate('yes'); ?>'
                        });
                    </script>
                </div>
            </div>

            <div class="form-group">
                <button tabindex="0" class="btn btn-default" data-ignore="true"
                        data-toggle="popover" data-placement="auto right"
                        id="bc-save"><?= $this->transEsc('Save'); ?>
                </button>
            </div>
        </form>

    </div>
    <div class="<?= $this->layoutClass('sidebar') ?>">
        <?= $this->render("admin/menu.phtml") ?>
    </div>
</div>
