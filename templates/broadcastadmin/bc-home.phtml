<?
$this->headTitle('VuFind Administration - ' . 'Broadcast Admin');
$this->headScript()->appendFile($this->basePath() . '/themes/hebisbs3' . '/js/admin.js');
$this->headScript()->appendFile($this->basePath() . '/themes/hebisbs3' . '/js/bootstrap2-toggle.min.js');
$this->headLink()->appendStylesheet($this->basePath() . '/themes/hebisbs3' . '/css/bootstrap2-toggle.min.css', 'all');
$lang = $this->layout()->userLang;
?>

<!--Modal-->
<div class="modal fade" id="bc-delete-confirmation" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" id="cross">&times;</button>
                <div class="pull-left col-md-2" style="font-size:300%">
                    <span class="hds-icon-trash-empty"><!-- --></span>
                </div>
                <p id="bc-delete-question"><?= $this->translate('Are you sure?') ?><i></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal"><?= $this->translate('Cancel') ?></button>
                <button type="button" class="btn btn-danger" data-dismiss="modal"
                        id="delete-confirmation-button"><?= $this->translate('Delete') ?></button>
            </div>
        </div>
    </div>
</div>
<!--End of Modal-->
<div class="row">
    <div class="<?= $this->layoutClass('mainbody') ?>">
        <h3><span class="hds-icon-bullseye"></span><b>Broadcasts</b></h3>
        <hr>
        <?
        $visibilitySymbols = array(
            'visible' => '<span class="hds-icon-eye green"></span>',
            'unvisible' => '<span class="hds-icon-eye-off red"></span>',
        ); ?>
        <? $oldbcid = -1; ?>

        <ul id="bc-list">
            <li>
                <div class="post">
                    <span class="hds-icon-plus-circled"></span>
                    <a href="<?= $this->url('broadcastadmin', ['action' => 'add']) ?>"><i><?= $this->transEsc('Add New Broadcast') ?></i></a>
                </div>
            </li>
            <? foreach ($this->rows as $row) : ?>
                <? if ($row->language !== $lang) {
                    continue;
                } ?>
                <? $bcid = $row->bcid; ?>
                <? if ($bcid !== $oldbcid) : ?>
                    <li>
                        <div class="broadcast" id="<?= $bcid ?>">
                            <a href="<?= $this->url('broadcastadmin', ['action' => 'edit', 'bcid' => $bcid]) ?>">
                                <span class="hds-icon-edit"><!--></span>
                            </a><?= $this->escapeHtml(strip_tags($row->message)); ?>
                        </div>
                    </li>
                <? endif; ?>
                <? $oldbcid = $bcid; ?>
            <? endforeach; ?>
        </ul>

    </div>
    <div class="<?= $this->layoutClass('sidebar') ?>">
        <?= $this->render("admin/menu.phtml") ?>
    </div>
</div>
